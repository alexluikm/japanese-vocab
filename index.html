<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>日文生字記憶練習</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            text-align: center;
            padding: 20px;
        }

        h1 {
            color: #333;
        }

        .container {
            display: flex;
            justify-content: space-around;
            margin: 20px auto;
            max-width: 800px;
        }

        .column {
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 10px;
            padding: 20px;
            width: 45%;
        }

        #words, #hiragana {
            display: flex;
            flex-direction: column;
            gap: 10px; /* 格子之間的間距 */
        }

        #words div, #hiragana div {
            padding: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            cursor: pointer;
            font-size: 24px; /* 統一文字大小 */
            text-align: center; /* 文字置中 */
            min-width: 100px; /* 最小寬度 */
            flex: 1; /* 讓格子自動調整大小 */
        }

        #words div.selected, #hiragana div.selected {
            background-color: #a0d8ef;
        }

        #words div.matched, #hiragana div.matched {
            background-color: orange; /* 配對成功後變為橙色 */
            opacity: 0.7; /* 降低透明度 */
            cursor: default; /* 取消點擊效果 */
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }

        button:hover {
            background-color: #45a049;
        }

        #result {
            margin-top: 20px;
            font-size: 18px;
            color: #333;
        }

        .category-selector {
            margin-bottom: 20px;
        }

        .category-selector label {
            margin-right: 10px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <h1>日文生字記憶練習</h1>
    <div class="category-selector">
        <label>
            <input type="checkbox" name="category" value="動詞" checked> 動詞
        </label>
        <label>
            <input type="checkbox" name="category" value="形容詞" checked> 形容詞
        </label>
        <label>
            <input type="checkbox" name="category" value="名詞" checked> 名詞
        </label>
        <button id="start">開始練習</button>
    </div>
    <div class="container">
        <div id="words" class="column">
            <h2>詞語</h2>
            <!-- 詞語會顯示在這裡 -->
        </div>
        <div id="hiragana" class="column">
            <h2>平假名</h2>
            <!-- 平假名會顯示在這裡 -->
        </div>
    </div>
    <button id="check">檢查答案</button>
    <p id="result"></p>

    <script>
        // 確保 HTML 載入後才執行 JavaScript
        document.addEventListener('DOMContentLoaded', () => {
            // 日文詞語和平假名資料
            const words = [
{ kanji: "終わります", hiragana: "おわります", category: "動詞" },
                { kanji: "起きます", hiragana: "おきます", category: "動詞" },
                { kanji: "寝ます", hiragana: "ねます", category: "動詞" },
                { kanji: "勉強します", hiragana: "べんきょうします", category: "動詞" },
                { kanji: "行きます", hiragana: "いきます", category: "動詞" },
                { kanji: "帰ります", hiragana: "かえります", category: "動詞" },
                { kanji: "来ます", hiragana: "きます", category: "動詞" },
                { kanji: "飲みます", hiragana: "のみます", category: "動詞" },
                { kanji: "吸います", hiragana: "すいます", category: "動詞" },
                { kanji: "聞きます", hiragana: "ききます", category: "動詞" },
                { kanji: "読みます", hiragana: "よみます", category: "動詞" },
                { kanji: "書きます", hiragana: "かきます", category: "動詞" },
                { kanji: "買います", hiragana: "かいます", category: "動詞" },
                { kanji: "撮ります", hiragana: "とります", category: "動詞" },
  		{ kanji: "青い", hiragana: "あおい", category: "形容詞" },
                { kanji: "冷たい", hiragana: "つめたい", category: "形容詞" },
                { kanji: "樂しい", hiragana: "たのしい", category: "形容詞" },
                { kanji: "小さい", hiragana: "ちいさい", category: "形容詞" },
                { kanji: "古い", hiragana: "ふるい", category: "形容詞" },
                { kanji: "非常好", hiragana: "すてき", category: "形容詞" },
                { kanji: "暑い", hiragana: "あつい", category: "形容詞" },
                { kanji: "軽い", hiragana: "かるい", category: "形容詞" },
                { kanji: "速い", hiragana: "はやい", category: "形容詞" },
                { kanji: "高い", hiragana: "たかい", category: "形容詞" },
                { kanji: "若い", hiragana: "わかい", category: "形容詞" },
                { kanji: "暖かい", hiragana: "あたたかい", category: "形容詞" },
                { kanji: "甘い", hiragana: "あまい", category: "形容詞" },
                { kanji: "狹い", hiragana: "せまい", category: "形容詞" },
                { kanji: "好き", hiragana: "すき", category: "形容詞" },
                { kanji: "便利", hiragana: "べんり", category: "形容詞" },
];

            // 開始練習按鈕
            document.getElementById('start').addEventListener('click', () => {
                const selectedCategories = Array.from(document.querySelectorAll('input[name="category"]:checked'))
                    .map(input => input.value);
                const filteredWords = words.filter(word => selectedCategories.includes(word.category));
                displayWordsAndHiragana(filteredWords);
            });

            // 隨機選擇10個詞語
            function getRandomWords(words, count) {
                const shuffled = words.sort(() => 0.5 - Math.random());
                return shuffled.slice(0, count);
            }

            // 顯示詞語和平假名
            function displayWordsAndHiragana(filteredWords) {
                const selectedWords = getRandomWords(filteredWords, 10);
                const hiraganaList = selectedWords.map(word => word.hiragana);
                const shuffledHiragana = hiraganaList.sort(() => 0.5 - Math.random());

                const wordsDiv = document.getElementById('words');
                const hiraganaDiv = document.getElementById('hiragana');

                // 清空內容
                wordsDiv.innerHTML = '<h2>詞語</h2>';
                hiraganaDiv.innerHTML = '<h2>平假名</h2>';

                // 顯示詞語
                selectedWords.forEach(word => {
                    const wordElement = document.createElement('div');
                    wordElement.textContent = word.kanji;
                    wordElement.dataset.hiragana = word.hiragana; // 儲存正確的平假名
                    wordsDiv.appendChild(wordElement);
                });

                // 顯示平假名
                shuffledHiragana.forEach(hiragana => {
                    const hiraganaElement = document.createElement('div');
                    hiraganaElement.textContent = hiragana;
                    hiraganaDiv.appendChild(hiraganaElement);
                });

                // 添加點擊事件
                addClickEvents();
            }

            // 添加點擊事件
            function addClickEvents() {
                const wordElements = document.querySelectorAll('#words div');
                const hiraganaElements = document.querySelectorAll('#hiragana div');

                let selectedWord = null;
                let selectedHiragana = null;

                wordElements.forEach(word => {
                    word.addEventListener('click', () => {
                        if (!word.classList.contains('matched')) { // 如果未配對成功
                            // 取消其他選中的詞語
                            wordElements.forEach(w => w.classList.remove('selected'));
                            word.classList.add('selected');
                            selectedWord = word;
                            checkMatch();
                        }
                    });
                });

                hiraganaElements.forEach(hiragana => {
                    hiragana.addEventListener('click', () => {
                        if (!hiragana.classList.contains('matched')) { // 如果未配對成功
                            // 取消其他選中的平假名
                            hiraganaElements.forEach(h => h.classList.remove('selected'));
                            hiragana.classList.add('selected');
                            selectedHiragana = hiragana;
                            checkMatch();
                        }
                    });
                });

                // 檢查是否匹配
                function checkMatch() {
                    if (selectedWord && selectedHiragana) {
                        if (selectedWord.dataset.hiragana === selectedHiragana.textContent) {
                            document.getElementById('result').textContent = "正確！";
                            selectedWord.classList.remove('selected');
                            selectedHiragana.classList.remove('selected');
                            selectedWord.classList.add('matched'); // 標記為已配對
                            selectedHiragana.classList.add('matched'); // 標記為已配對
                            selectedWord = null;
                            selectedHiragana = null;
                        } else {
                            document.getElementById('result').textContent = "錯誤，請再試一次！";
                        }
                    }
                }
            }

            // 檢查答案按鈕
            document.getElementById('check').addEventListener('click', () => {
                const unmatchedWords = document.querySelectorAll('#words div:not(.matched)');
                if (unmatchedWords.length === 0) {
                    document.getElementById('result').textContent = "全部正確！太棒了！";
                } else {
                    document.getElementById('result').textContent = "還有未完成的配對哦！";
                }
            });
        });
    </script>
</body>
</html>