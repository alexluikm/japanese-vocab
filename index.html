<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>日文生字記憶練習</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            text-align: center;
            padding: 10px; /* 減少 padding */
            margin: 0;
            height: 100vh; /* 讓 body 佔滿整個視口高度 */
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* 讓內容均勻分佈 */
        }

        h1 {
            color: #333;
            font-size: 20px; /* 縮小標題字體大小 */
            margin: 10px 0; /* 減少 margin */
        }

        .container {
            display: flex;
            flex-wrap: wrap; /* 允許內容換行 */
            justify-content: space-around;
            margin: 10px auto; /* 減少 margin */
            max-width: 1200px;
            flex: 1; /* 讓容器佔滿剩餘空間 */
            overflow: auto; /* 如果內容超出，允許內部滾動 */
        }

        .column {
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 10px;
            padding: 10px; /* 減少 padding */
            width: 100%; /* 預設為100%寬度 */
            box-sizing: border-box;
            margin-bottom: 10px; /* 減少間距 */
        }

        #chinese div, #words div, #hiragana div {
            padding: 8px; /* 減少 padding */
            background-color: #e0e0e0;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px; /* 縮小字體大小 */
            text-align: center;
            margin: 3px 0; /* 減少間距 */
        }

        #words div.selected, #hiragana div.selected {
            background-color: #a0d8ef;
        }

        #words div.matched, #hiragana div.matched {
            background-color: orange;
            opacity: 0.7;
            cursor: default;
        }

        button {
            padding: 8px 16px; /* 減少 padding */
            font-size: 14px; /* 縮小字體大小 */
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px; /* 減少 margin */
        }

        button:hover {
            background-color: #45a049;
        }

        #result {
            margin-top: 10px; /* 減少 margin */
            font-size: 14px; /* 縮小字體大小 */
            color: #333;
        }

        .category-selector {
            margin-bottom: 10px; /* 減少 margin */
        }

        .category-selector label {
            margin-right: 8px; /* 減少間距 */
            font-size: 14px; /* 縮小字體大小 */
        }

        /* 響應式設計 */
        @media (min-width: 600px) {
            .column {
                width: 45%; /* 平板設備上顯示兩欄 */
            }
        }

        @media (min-width: 900px) {
            .column {
                width: 30%; /* 桌面設備上顯示三欄 */
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 18px; /* 手機設備上調整標題大小 */
            }

            #chinese div, #words div, #hiragana div {
                font-size: 12px; /* 手機設備上調整字體大小 */
            }

            button {
                width: 100%; /* 手機設備上按鈕佔滿寬度 */
                margin-top: 8px; /* 減少 margin */
            }
        }
    </style>
</head>
<body>
    <h1>日文生字記憶練習</h1>
    <div class="category-selector">
        <label>
            <input type="checkbox" name="category" value="動詞" checked> 動詞
        </label>
        <label>
            <input type="checkbox" name="category" value="形容詞" checked> 形容詞
        </label>
        <label>
            <input type="checkbox" name="category" value="名詞" checked> 名詞
        </label>
        <button id="start">開始練習</button>
    </div>
    <div class="container">
        <div id="chinese" class="column">
            <h2>中文解釋</h2>
            <!-- 中文解釋會顯示在這裡 -->
        </div>
        <div id="words" class="column">
            <h2>詞語</h2>
            <!-- 詞語會顯示在這裡 -->
        </div>
        <div id="hiragana" class="column">
            <h2>平假名</h2>
            <!-- 平假名會顯示在這裡 -->
        </div>
    </div>
    <button id="check">檢查答案</button>
    <p id="result"></p>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const words = [
{ kanji: "働きます", hiragana: "はたらきます", chinese: "工作", category: "動詞" },
{ kanji: "休みます", hiragana: "やすみます", chinese: "休息", category: "動詞" },
{ kanji: "終わります", hiragana: "おわります", chinese: "結束", category: "動詞" },
{ kanji: "起きます", hiragana: "おきます", chinese: "起床", category: "動詞" },
{ kanji: "寝ます", hiragana: "ねます", chinese: "睡覺", category: "動詞" },
{ kanji: "勉強します", hiragana: "べんきょうします", chinese: "念書", category: "動詞" },
{ kanji: "行きます", hiragana: "いきます", chinese: "去", category: "動詞" },
{ kanji: "帰ります", hiragana: "かえります", chinese: "回", category: "動詞" },
{ kanji: "来ます", hiragana: "きます", chinese: "來", category: "動詞" },
{ kanji: "飲みます", hiragana: "のみます", chinese: "喝", category: "動詞" },
{ kanji: "吸います", hiragana: "すいます", chinese: "吸（煙）", category: "動詞" },
{ kanji: "聞きます", hiragana: "ききます", chinese: "聽", category: "動詞" },
{ kanji: "読みます", hiragana: "よみます", chinese: "閱讀", category: "動詞" },
{ kanji: "書きます", hiragana: "かきます", chinese: "書寫", category: "動詞" },
{ kanji: "買います", hiragana: "かいます", chinese: "購買", category: "動詞" },
{ kanji: "撮ります", hiragana: "とります", chinese: "拍攝", category: "動詞" },
{ kanji: "会います", hiragana: "あいます", chinese: "見面", category: "動詞" },
{ kanji: "食べます", hiragana: "たべます", chinese: "吃", category: "動詞" },
{ kanji: "見ます", hiragana: "みます", chinese: "看", category: "動詞" },
{ kanji: "します", hiragana: "します", chinese: "做", category: "動詞" },
{ kanji: "切ります", hiragana: "きります", chinese: "切", category: "動詞" },
{ kanji: "送ります", hiragana: "おくります", chinese: "寄", category: "動詞" },
{ kanji: "もらいます", hiragana: "もらいます", chinese: "得到", category: "動詞" },
{ kanji: "貸します", hiragana: "かします", chinese: "借給", category: "動詞" },
{ kanji: "習います", hiragana: "ならいます", chinese: "學習", category: "動詞" },
{ kanji: "あげます", hiragana: "あげます", chinese: "給", category: "動詞" },
{ kanji: "借ります", hiragana: "かります", chinese: "借回來", category: "動詞" },
{ kanji: "教えます", hiragana: "おしえます", chinese: "教，告訴", category: "動詞" },
{ kanji: "かけます", hiragana: "かけます", chinese: "打（電話）", category: "動詞" },
{ kanji: "わかります", hiragana: "わかります", chinese: "懂，明白", category: "動詞" },
{ kanji: "あります", hiragana: "あります", chinese: "有", category: "動詞" },
{ kanji: "います", hiragana: "います", chinese: "有", category: "動詞" },
{ kanji: "かかります", hiragana: "かかります", chinese: "花費", category: "動詞" },
{ kanji: "休みます", hiragana: "やすみます", chinese: "請假（向公司）", category: "動詞" },
{ kanji: "遊びます", hiragana: "あそびます", chinese: "玩", category: "動詞" },
{ kanji: "泳ぎます", hiragana: "およぎます", chinese: "游泳", category: "動詞" },
{ kanji: "迎えます", hiragana: "むかえます", chinese: "迎接", category: "動詞" },
{ kanji: "疲れます", hiragana: "つかれます", chinese: "疲累", category: "動詞" },
{ kanji: "結婚します", hiragana: "けっこんします", chinese: "結婚", category: "動詞" },
{ kanji: "買い物します", hiragana: "かいものします", chinese: "買東西", category: "動詞" },
{ kanji: "食事します", hiragana: "しょくじします", chinese: "吃飯", category: "動詞" },
{ kanji: "散歩します", hiragana: "さんぽします", chinese: "散步", category: "動詞" },
{ kanji: "消します", hiragana: "けします", chinese: "關（空調）", category: "動詞" },
{ kanji: "急ぎます", hiragana: "いそぎます", chinese: "趕快", category: "動詞" },
{ kanji: "待ちます", hiragana: "まちます", chinese: "等", category: "動詞" },
{ kanji: "持ちます", hiragana: "もちます", chinese: "拿", category: "動詞" },
{ kanji: "取ります", hiragana: "とります", chinese: "取", category: "動詞" },
{ kanji: "手伝います", hiragana: "てつだいます", chinese: "幫忙", category: "動詞" },
{ kanji: "呼びます", hiragana: "よびます", chinese: "叫", category: "動詞" },
{ kanji: "話します", hiragana: "はなします", chinese: "說", category: "動詞" },
{ kanji: "使います", hiragana: "つかいます", chinese: "使用", category: "動詞" },
{ kanji: "座ります", hiragana: "すわります", chinese: "坐", category: "動詞" },
{ kanji: "立ちます", hiragana: "たちます", chinese: "站立", category: "動詞" },
{ kanji: "入ります", hiragana: "はいります", chinese: "進入", category: "動詞" },
{ kanji: "降ります", hiragana: "ふります", chinese: "下（雨）", category: "動詞" },
{ kanji: "つけます", hiragana: "つけます", chinese: "開（空調）", category: "動詞" },
{ kanji: "開けます", hiragana: "あけます", chinese: "開（門）", category: "動詞" },
{ kanji: "閉めます", hiragana: "しめます", chinese: "閉（門）", category: "動詞" },
{ kanji: "止めます", hiragana: "とめます", chinese: "停止", category: "動詞" },
{ kanji: "見せます", hiragana: "みせます", chinese: "出示", category: "動詞" },
{ kanji: "教えます", hiragana: "おしえます", chinese: "告訴", category: "動詞" },
{ kanji: "出ます", hiragana: "でます", chinese: "離開", category: "動詞" },
{ kanji: "コピーします", hiragana: "コピーします", chinese: "復印", category: "動詞" },
{ kanji: "置きます", hiragana: "おきます", chinese: "放置", category: "動詞" },
{ kanji: "作ります", hiragana: "つくります", chinese: "製造", category: "動詞" },
{ kanji: "売ります", hiragana: "うります", chinese: "賣", category: "動詞" },
{ kanji: "知ります", hiragana: "しります", chinese: "知道", category: "動詞" },
{ kanji: "住みます", hiragana: "すみます", chinese: "居住", category: "動詞" },
{ kanji: "研究します", hiragana: "けんきゅうします", chinese: "研究", category: "動詞" },
{ kanji: "乗ります", hiragana: "のります", chinese: "搭乘", category: "動詞" },
{ kanji: "出します", hiragana: "だします", chinese: "拿出", category: "動詞" },
{ kanji: "下ろします", hiragana: "おろします", chinese: "領（錢）", category: "動詞" },
{ kanji: "入ります", hiragana: "はいります", chinese: "上（大學）", category: "動詞" },
{ kanji: "押します", hiragana: "おします", chinese: "推", category: "動詞" },
{ kanji: "飲みます", hiragana: "のみます", chinese: "喝", category: "動詞" },
{ kanji: "降ります", hiragana: "おります", chinese: "下（電車）", category: "動詞" },
{ kanji: "乗り換えます", hiragana: "のりかえます", chinese: "轉乘", category: "動詞" },
{ kanji: "浴びます", hiragana: "あびます", chinese: "淋", category: "動詞" },
{ kanji: "入れます", hiragana: "いれます", chinese: "放入", category: "動詞" },
{ kanji: "出ます", hiragana: "でます", chinese: "畢業（大學）", category: "動詞" },
{ kanji: "始めます", hiragana: "はじめます", chinese: "開始", category: "動詞" },
{ kanji: "見学します", hiragana: "けんがくします", chinese: "參觀", category: "動詞" },
{ kanji: "電話します", hiragana: "でんわします", chinese: "打電話", category: "動詞" },
{ kanji: "なくします", hiragana: "なくします", chinese: "遺失", category: "動詞" },
{ kanji: "払います", hiragana: "はらいます", chinese: "支付", category: "動詞" },
{ kanji: "返します", hiragana: "かえします", chinese: "歸還", category: "動詞" },
{ kanji: "脱ぎます", hiragana: "ぬぎます", chinese: "脫", category: "動詞" },
{ kanji: "持って行きます", hiragana: "もっていきます", chinese: "帶，拿去", category: "動詞" },
{ kanji: "飲みます", hiragana: "のみます", chinese: "吃藥", category: "動詞" },
{ kanji: "入ります", hiragana: "はいります", chinese: "入浴", category: "動詞" },
{ kanji: "覚えます", hiragana: "おぼえます", chinese: "記住", category: "動詞" },
{ kanji: "忘れます", hiragana: "わすれます", chinese: "忘記", category: "動詞" },
{ kanji: "出かけます", hiragana: "でかけます", chinese: "出門", category: "動詞" },
{ kanji: "持って来ます", hiragana: "もってきます", chinese: "帶，拿來", category: "動詞" },
{ kanji: "心配します", hiragana: "しんぱいします", chinese: "擔心", category: "動詞" },
{ kanji: "残業します", hiragana: "ざんぎょうします", chinese: "加班", category: "動詞" },
{ kanji: "出張します", hiragana: "しゅっちょうします", chinese: "出差", category: "動詞" },
{ kanji: "洗います", hiragana: "あらいます", chinese: "洗", category: "動詞" },
{ kanji: "弾きます", hiragana: "ひきます", chinese: "彈奏", category: "動詞" },
{ kanji: "歌います", hiragana: "うたいます", chinese: "唱歌", category: "動詞" },
{ kanji: "できます", hiragana: "できます", chinese: "能夠", category: "動詞" },
{ kanji: "集めます", hiragana: "あつめます", chinese: "收集", category: "動詞" },
{ kanji: "捨てます", hiragana: "すてます", chinese: "捨棄", category: "動詞" },
{ kanji: "換えます", hiragana: "かえます", chinese: "換", category: "動詞" },
{ kanji: "運転します", hiragana: "うんてんします", chinese: "駕駛", category: "動詞" },
{ kanji: "予約します", hiragana: "よやくします", chinese: "預約", category: "動詞" },
{ kanji: "登ります", hiragana: "のぼります", chinese: "登，上", category: "動詞" },
{ kanji: "泊まります", hiragana: "とまります", chinese: "住（酒店）", category: "動詞" },
{ kanji: "なります", hiragana: "なります", chinese: "變成", category: "動詞" },
{ kanji: "掃除します", hiragana: "そうじします", chinese: "打掃", category: "動詞" },
{ kanji: "洗濯します", hiragana: "せんたくします", chinese: "洗衣服", category: "動詞" },
{ kanji: "要ります", hiragana: "いります", chinese: "需要", category: "動詞" },
{ kanji: "調べます", hiragana: "しらべます", chinese: "調查", category: "動詞" },
{ kanji: "修理します", hiragana: "しゅうりします", chinese: "修理", category: "動詞" },
{ kanji: "思います", hiragana: "おもいます", chinese: "覺得", category: "動詞" },
{ kanji: "言います", hiragana: "いいます", chinese: "說", category: "動詞" },
{ kanji: "勝ちます", hiragana: "かちます", chinese: "贏", category: "動詞" },
{ kanji: "あります", hiragana: "あります", chinese: "有（慶典）", category: "動詞" },
{ kanji: "役に立ちます", hiragana: "やくにたちます", chinese: "有用，派上用場", category: "動詞" },
{ kanji: "動きます", hiragana: "うごきます", chinese: "轉動", category: "動詞" },
{ kanji: "負けます", hiragana: "まけます", chinese: "輸", category: "動詞" },
{ kanji: "やめます", hiragana: "やめます", chinese: "辭職", category: "動詞" },
{ kanji: "気をつけます", hiragana: "きをつけます", chinese: "小心，注意", category: "動詞" },
{ kanji: "留学します", hiragana: "りゅうがくします", chinese: "留學", category: "動詞" },
{ kanji: "履きます", hiragana: "はきます", chinese: "穿（鞋/褲）", category: "動詞" },
{ kanji: "かぶります", hiragana: "かぶります", chinese: "戴（帽）", category: "動詞" },
{ kanji: "着ます", hiragana: "きます", chinese: "穿（衫）", category: "動詞" },
{ kanji: "かけます", hiragana: "かけます", chinese: "戴（眼鏡）", category: "動詞" },
{ kanji: "生まれます", hiragana: "うまれます", chinese: "出生", category: "動詞" },
{ kanji: "します", hiragana: "します", chinese: "繫（領帶）", category: "動詞" },
{ kanji: "聞きます", hiragana: "ききます", chinese: "問（老師）", category: "動詞" },
{ kanji: "回します", hiragana: "まわします", chinese: "轉動", category: "動詞" },
{ kanji: "引きます", hiragana: "ひきます", chinese: "拉", category: "動詞" },
{ kanji: "触ります", hiragana: "さわります", chinese: "摸", category: "動詞" },
{ kanji: "歩きます", hiragana: "あるきます", chinese: "走（路）", category: "動詞" },
{ kanji: "渡ります", hiragana: "わたります", chinese: "過（橋）", category: "動詞" },
{ kanji: "曲がります", hiragana: "まがります", chinese: "轉彎", category: "動詞" },
{ kanji: "変えます", hiragana: "かえます", chinese: "改變", category: "動詞" },
{ kanji: "出ます", hiragana: "でます", chinese: "出來（零錢）", category: "動詞" },
{ kanji: "直します", hiragana: "なおします", chinese: "修理", category: "動詞" },
{ kanji: "連れて行きます", hiragana: "つれていきます", chinese: "帶（某人）去", category: "動詞" },
{ kanji: "送ります", hiragana: "おくります", chinese: "送行", category: "動詞" },
{ kanji: "くれます", hiragana: "くれます", chinese: "給", category: "動詞" },
{ kanji: "連れて来ます", hiragana: "つれてきます", chinese: "帶（某人）來", category: "動詞" },
{ kanji: "紹介します", hiragana: "しょうかいします", chinese: "介紹", category: "動詞" },
{ kanji: "案内します", hiragana: "あんないします", chinese: "帶路", category: "動詞" },
{ kanji: "説明します", hiragana: "せつめいします", chinese: "說明", category: "動詞" },
{ kanji: "着きます", hiragana: "つきます", chinese: "到達", category: "動詞" },
{ kanji: "取ります", hiragana: "とります", chinese: "增長", category: "動詞" },
{ kanji: "足ります", hiragana: "たります", chinese: "足夠", category: "動詞" },
{ kanji: "考えます", hiragana: "かんがえます", chinese: "思考", category: "動詞" },                
                // 更多詞語...
            ];

            let usedWords = []; // 存儲已經出現過的詞語

            document.getElementById('start').addEventListener('click', () => {
                const selectedCategories = Array.from(document.querySelectorAll('input[name="category"]:checked'))
                    .map(input => input.value);
                const filteredWords = words.filter(word => selectedCategories.includes(word.category));
                displayWordsAndHiragana(filteredWords);
            });

            function getRandomWords(filteredWords, count) {
                const newWords = filteredWords.filter(word => !usedWords.includes(word)); // 未使用過的詞語
                const oldWords = filteredWords.filter(word => usedWords.includes(word)); // 已使用過的詞語

                const newCount = Math.floor(count * 0.6); // 60% 新詞語
                const oldCount = count - newCount; // 40% 舊詞語

                const selectedNewWords = getRandomSubset(newWords, newCount); // 從新詞語中隨機選取
                const selectedOldWords = getRandomSubset(oldWords, oldCount); // 從舊詞語中隨機選取

                const selectedWords = [...selectedNewWords, ...selectedOldWords]; // 合併新舊詞語
                return selectedWords.sort(() => 0.5 - Math.random()); // 打亂順序
            }

            function getRandomSubset(array, count) {
                const shuffled = array.sort(() => 0.5 - Math.random());
                return shuffled.slice(0, count);
            }

            function displayWordsAndHiragana(filteredWords) {
                const selectedWords = getRandomWords(filteredWords, 10);
                const hiraganaList = selectedWords.map(word => word.hiragana);
                const shuffledHiragana = hiraganaList.sort(() => 0.5 - Math.random());

                const chineseDiv = document.getElementById('chinese');
                const wordsDiv = document.getElementById('words');
                const hiraganaDiv = document.getElementById('hiragana');

                chineseDiv.innerHTML = '<h2>中文解釋</h2>';
                wordsDiv.innerHTML = '<h2>詞語</h2>';
                hiraganaDiv.innerHTML = '<h2>平假名</h2>';

                selectedWords.forEach(word => {
                    const chineseElement = document.createElement('div');
                    chineseElement.textContent = word.chinese;
                    chineseDiv.appendChild(chineseElement);

                    const wordElement = document.createElement('div');
                    wordElement.textContent = word.kanji;
                    wordElement.dataset.hiragana = word.hiragana;
                    wordsDiv.appendChild(wordElement);
                });

                shuffledHiragana.forEach(hiragana => {
                    const hiraganaElement = document.createElement('div');
                    hiraganaElement.textContent = hiragana;
                    hiraganaDiv.appendChild(hiraganaElement);
                });

                // 將新選取的詞語加入已出現過的詞語列表
                selectedWords.forEach(word => {
                    if (!usedWords.includes(word)) {
                        usedWords.push(word);
                    }
                });

                addClickEvents();
            }

            function addClickEvents() {
                const wordElements = document.querySelectorAll('#words div');
                const hiraganaElements = document.querySelectorAll('#hiragana div');

                let selectedWord = null;
                let selectedHiragana = null;

                wordElements.forEach(word => {
                    word.addEventListener('click', () => {
                        if (!word.classList.contains('matched')) {
                            wordElements.forEach(w => w.classList.remove('selected'));
                            word.classList.add('selected');
                            selectedWord = word;
                            checkMatch();
                        }
                    });
                });

                hiraganaElements.forEach(hiragana => {
                    hiragana.addEventListener('click', () => {
                        if (!hiragana.classList.contains('matched')) {
                            hiraganaElements.forEach(h => h.classList.remove('selected'));
                            hiragana.classList.add('selected');
                            selectedHiragana = hiragana;
                            checkMatch();
                        }
                    });
                });

                function checkMatch() {
                    if (selectedWord && selectedHiragana) {
                        if (selectedWord.dataset.hiragana === selectedHiragana.textContent) {
                            document.getElementById('result').textContent = "正確！";
                            selectedWord.classList.remove('selected');
                            selectedHiragana.classList.remove('selected');
                            selectedWord.classList.add('matched');
                            selectedHiragana.classList.add('matched');
                            selectedWord = null;
                            selectedHiragana = null;
                        } else {
                            document.getElementById('result').textContent = "錯誤，請再試一次！";
                        }
                    }
                }
            }

            document.getElementById('check').addEventListener('click', () => {
                const unmatchedWords = document.querySelectorAll('#words div:not(.matched)');
                if (unmatchedWords.length === 0) {
                    document.getElementById('result').textContent = "全部正確！太棒了！";
                } else {
                    document.getElementById('result').textContent = "還有未完成的配對哦！";
                }
            });
        });
    </script>
</body>
</html>